import{k as g,r as h,s as W,v as x,x as A,y as D}from"./index-BUJaVSVR.js";function P(t){return typeof t=="function"?t():g(t)}typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;function G(t,e){function n(...r){return new Promise((a,o)=>{Promise.resolve(t(()=>e.apply(this,r),{fn:e,thisArg:this,args:r})).then(a).catch(o)})}return n}const y=t=>t();function C(t=y){const e=h(!0);function n(){e.value=!1}function r(){e.value=!0}const a=(...o)=>{e.value&&t(...o)};return{isActive:W(e),pause:n,resume:r,eventFilter:a}}function I(t,e,n={}){const{eventFilter:r=y,...a}=n;return x(t,G(r,e),a)}function O(t,e,n={}){const{eventFilter:r,...a}=n,{eventFilter:o,pause:i,resume:p,isActive:l}=C(r);return{stop:I(t,e,{...a,eventFilter:o}),pause:i,resume:p,isActive:l}}function u(t){return new Promise((e,n)=>{t.oncomplete=t.onsuccess=()=>e(t.result),t.onabort=t.onerror=()=>n(t.error)})}function R(t,e){const n=indexedDB.open(t);n.onupgradeneeded=()=>n.result.createObjectStore(e);const r=u(n);return(a,o)=>r.then(i=>o(i.transaction(e,a).objectStore(e)))}let w;function f(){return w||(w=R("keyval-store","keyval")),w}function j(t,e=f()){return e("readonly",n=>u(n.get(t)))}function B(t,e,n=f()){return n("readwrite",r=>(r.put(e,t),u(r.transaction)))}function E(t,e,n=f()){return n("readwrite",r=>new Promise((a,o)=>{r.get(t).onsuccess=function(){try{r.put(e(this.result),t),a(u(r.transaction))}catch(i){o(i)}}}))}function T(t,e=f()){return e("readwrite",n=>(n.delete(t),u(n.transaction)))}function K(t,e,n={}){const{flush:r="pre",deep:a=!0,shallow:o=!1,onError:i=c=>{console.error(c)},writeDefaults:p=!0}=n,l=h(!1),s=(o?A:h)(e),d=P(e);async function m(){try{const c=await j(t);c===void 0?d!=null&&p&&await B(t,d):s.value=c}catch(c){i(c)}l.value=!0}m();async function v(){try{s.value==null?await T(t):await E(t,()=>D(s.value))}catch(c){i(c)}}const{pause:b,resume:F}=O(s,()=>v(),{flush:r,deep:a});async function S(c){b(),s.value=c,await v(),F()}return{set:S,isFinished:l,data:s}}const L={proxy:"доверенность",contract:"договор",act:"акт",application:"заявление",order:"приказ",invoice:"счет",bill:"приложение",arrangement:"соглашение","contract offer":"договор оферты",statute:"устав",determination:"решение"},V=t=>t.split(".").pop();export{L as C,V as g,K as u};
